% ===========================
% Filename : flood_vulnerability.m
% ===========================

echo on

% =========================================================
% A Fuzzy Expert System for Assessing Flood Vulnerability in Java Island
% =========================================================
25
% ===================================================================================
% Problem: Assessment of flood vulnerability in Java Island is normally 
%          based on the altitude area, density of human population and 
%          rainfall rate, which is predicted by the wind velocity and
%          temperature.
% ===================================================================================

% Hit any key to load every single time
pause
% Load FIS 1
a1=readfis("flood_1.fis");
pause
figure('name','Block diagram of a fuzzy model for Rainfall');
plotfis(a1);
pause
figure('name','Air Temperature, Celcius');
plotmf(a1,'input',1);
pause
figure('name','Wind Velocity, km/hr');
plotmf(a1,'input',2);
pause
figure('name','Rainfall, mm/hour');
plotmf(a1,'output',1);
pause
ruleedit(a1);
pause
figure('name','Three-dimensional surface for Rule Base 1');
gensurf(a1,[1 2],1);
pause
ruleview(a1)
pause

% Load FIS 2
a2=readfis("flood_2.fis");
pause
figure('name','Block diagram of a fuzzy model for Flood Vulnerability');
plotfis(a2);
pause
figure('name','Population_density, people/km2');
plotmf(a2,'input',1);
pause
figure('name','Altitude_area, amsl');
plotmf(a2,'input',2);
pause
figure('name','Rainfall, mm/hour');
plotmf(a2,'input',3);
figure('name','Vulnerability of Flood');
plotmf(a2,'output',1);
pause
ruleedit(a2);
pause
figure('name','Three-dimensional surface for Rule Base 2');
gensurf(a2,[1 2],1);
pause
figure('name','Three-dimensional surface for Rule Base 2')
gensurf(a2,[1 3],1);
pause
figure('name','Three-dimensional surface for Rule Base 2')
gensurf(a2,[2 3],1);
pause
ruleview(a2)

% Hit any key to start assessing Case 1.
pause

% CASE STUDY 1
% ====================================================================================
% Suppose, a district namely Bojongloa Kaler has a population density of
% 6,817 people/km^2 and the altitude area of 364 amsl. This district has
% also recorded the surrounding temperature of 20 degree Celcius and the
% wind velocity as 6 km/hour
% ====================================================================================

% Hit any key to obtain results of the rainfall for Case 1.
pause
rainfall=evalfis(a1,[20 6])

% Hit any key to obtain results of the flood vulnerability for Case 1.
pause
floodVul=evalfis(a2,[6.817 364 rainfall])

if (floodVul<=231)
    disp("Flood Vulnerability: Normal")
elseif (floodVul>231)&&(floodVul<=388)
    disp("Flood Vulnerability: Alert")
elseif (floodVul>388)
    disp("Flood Vulnerability: Danger")
end


% Hit any key to start assessing Case 2.
pause

% CASE STUDY 2
% ====================================================================================
% Suppose, a district namely Bulu Lor has a population density of
% 25283 people/km^2 and the altitude area of 2 amsl. This district has
% also recorded the surrounding temperature of 45 degree Celcius and the
% wind velocity of 7.14 km/hour.
% ====================================================================================

% Hit any key to obtain results of the rainfall for Case 2.
pause
rainfall=evalfis(a1,[45 7.14])

% Hit any key to obtain results of the Flood Vulnerability for Case 2.
pause
floodVul=evalfis(a2,[25.283 2 rainfall])

if (floodVul<=231)
    disp("Flood Vulnerability: Normal")
elseif (floodVul>231)&&(floodVul<=388)
    disp("Flood Vulnerability: Alert")
elseif (floodVul>388)
    disp("Flood Vulnerability: Danger")
end

echo off
disp('End of Flood_vulnerability.m')